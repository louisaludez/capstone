{% comment %}This include renders a generic table. It supports different order models by detecting fields. Supported models: Booking (FO), CafeOrder (Cafe), LaundryTransaction (Laundry), Housekeeping.{% endcomment %}
{% load custom_filters %}

{% for order in orders %}
  <div class="row row-border text-center align-items- mx-2">
    <div class="col-1">
      <input type="checkbox" />
    </div>
    <div class="col-1">{{ order.room }}</div>
    <div class="col-2">
      {# Guest or customer name #}
      {% if order.guest %}
        {{ order.guest.name }}
      {% elif order.customer_name %}
        {{ order.customer_name }}
      {% elif order.guest_name %}
        {{ order.guest_name }}
      {% else %}
        —
      {% endif %}
    </div>
    <div class="col-1">
      {% if order.room and room_mapping %}
        {{ room_mapping|lookup:order.room|default:'—' }}
      {% else %}
        —
      {% endif %}
    </div>
    <div class="col-2">
      {% if order.created_at %}
        {{ order.created_at|date:'H:i d/m/Y' }}
      {% elif order.order_date %}
        {{ order.order_date|date:'H:i d/m/Y' }}
      {% elif order.date_time %}
        {{ order.date_time|date:'H:i d/m/Y' }}
      {% elif order.booking_date %}
        {{ order.booking_date|date:'H:i d/m/Y' }}
      {% else %}
        —
      {% endif %}
    </div>
    <div class="col-1">
      {% if order.check_out_date %}
        {{ order.check_out_date|date:'d/m/Y' }}
      {% else %}
        —
      {% endif %}
    </div>
    <div class="col-1">
      {% if order.num_of_adults and order.num_of_children %}
        {{ order.num_of_adults }}+{{ order.num_of_children }}
      {% elif order.total_of_guests %}
        {{ order.total_of_guests }}
      {% else %}
        —
      {% endif %}
    </div>
    <div class="col-1">
      {% if order.guest and order.guest.billing %}
        ₱{{ order.guest.billing }}
      {% else %}
        —
      {% endif %}
    </div>
    <div class="col-1">
      {% if order.guest %}
        ₱{{ order.guest|total_other_charges }}
      {% else %}
        —
      {% endif %}
    </div>
    <div class="col-1">
      {% if order.payment %}
        {{ order.payment.method|title }}
      {% else %}
        —
      {% endif %}
    </div>
  </div>
{% empty %}
  <div class="text-center py-4">
    <p>No records found.</p>
  </div>
{% endfor %}
